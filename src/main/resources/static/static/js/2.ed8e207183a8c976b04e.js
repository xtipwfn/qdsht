webpackJsonp([2],{"9bBU":function(e,t,a){a("mClu");var i=a("FeBl").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},NeW0:function(e,t){},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var i,s=a("C4MV"),r=(i=s)&&i.__esModule?i:{default:i};t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},coSV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),r=a("bOdI"),n=a.n(r),l=a("mtWM"),c=a.n(l),o={data:function(){var e;return e={loading:!1,totalSize:0,currentPage:1,yhxxList:[],choosenFun:[],props:{label:"name",children:"zones"},getTitleText5:"新增人员权限",editData:{jsList:[],sjRyName:"",sjRyUuid:""},selectionList:[],lx:"",isShowEditStaff:!1,editActive:"first",data2:[],defaultPropsMenu:{children:"children",label:"MENU_NAME"},gridDataCk:[],checked:!0,dialogTableGetUser:!1,dialogNameGetUser:"选择添加的员工",gridDataSize:1},n()(e,"currentPage",1),n()(e,"menuCheckList",[]),n()(e,"addRyUuid",""),n()(e,"editMenuName",""),n()(e,"editMenuUuid",""),n()(e,"search_ryxm",""),n()(e,"searchUserValue",""),e},methods:{searchFun:function(){this.queryMenuUser(this.search_ryxm,1)},handletableClick:function(){},searchUser:function(){this.queryAddMenuUser(this.searchUserValue,1)},gridCurrentChange:function(e){this.queryAddMenuUser(this.searchUserValue,e)},handletableUserClick:function(e){this.dialogTableGetSsck=!1,this.addRyUuid=e.USER_UUID,this.isShowEditStaff=!0,this.getTitleText5="新增人员权限("+e.XM+")",this.editActive="first",this.queryMenuByUserId()},queryAddMenuUser:function(e,t){var a=this;c()({methods:"post",url:this.projectName+"UserServlet",params:{action:"queryAddMenuUser",input:e,start:t}}).then(function(e){"Fail"==e.data.result?(a.gridDataCk=[],a.gridDataSize=0):(a.gridDataCk=e.data.ryList,a.gridDataSize=e.data.ryList[0].ZS)}).catch(function(e){})},handleSelectionChange:function(e,t){e.length,this.selectionList=e},handleCurrentChange:function(e){this.queryMenuUser(this.search_ryxm,e)},handleTableCurrentChange:function(e){this.selectionList=e},addStaff:function(){this.$refs.singleTableRy.setCurrentRow(),this.addRyUuid="",this.editData.sjRyUuid="",this.editData.sjRyName="",this.dialogNameGetUser="选择添加的员工",this.dialogTableGetUser=!0,this.gridDataCk=[],this.queryAddMenuUser(this.searchUserValue,1)},editStaff:function(){if(""==this.selectionList||null==this.selectionList)return this.$message({type:"error",message:"请选择人员进行编辑!"}),!1;this.addRyUuid=this.selectionList.USER_UUID,this.xm=this.selectionList.XM,this.isShowEditStaff=!0,this.editActive="first",this.getTitleText5="编辑人员权限("+this.xm+")",this.queryMenuByUserId()},handleNodeCheck:function(e,t){var a=s()(t.checkedKeys);a=a.substring(1,a.length-1),c()({methods:"post",url:this.projectName+"UserServlet",params:{action:"saveMenuByUserId",menuUuidStr:a,userUuid:this.addRyUuid}}).then(function(e){}).catch(function(e){})},queryMenuByUserId:function(){this.menuQxList=[],this.editMenuName="",this.menuCheckList=[];var e=this;c()({methods:"post",url:this.projectName+"UserServlet",params:{action:"queryMenuByUserId",userUuid:this.addRyUuid}}).then(function(t){if("Fail"==t.data.result);else{var a=t.data.menuList;e.data2=function(e){e.forEach(function(e){delete e.children});var t={};e.forEach(function(e){t[e.MENU_UUID]=e});var a=[];return e.forEach(function(e){var i=t[e.SJ_MENU_UUID];i?(i.children||(i.children=[])).push(e):a.push(e)}),a}(a);for(var i=[],s=0;s<t.data.menuList.length;s++)"Y"==t.data.menuList[s].IS_SELECT&&null!=t.data.menuList[s].SJ_MENU_UUID&&i.push(t.data.menuList[s].MENU_UUID);e.menuCheckList=i}}).catch(function(e){})},saveRyxx:function(){var e=this;c()({methods:"post",url:this.projectName+"UserServlet",params:{action:"saveMenuUser",userUuid:this.addRyUuid}}).then(function(t){"Fail"==t.data.result?e.$message({type:"error",message:t.data.msg}):(e.$message({type:"success",message:t.data.msg}),e.isShowEditStaff=!1,e.dialogTableGetUser=!1,e.queryMenuUser(e.search_ryxm,1),e.currentPage=1)}).catch(function(e){})},queryMenuUser:function(e,t){this.loading=!0;var a=this;c()({methods:"post",url:this.projectName+"UserServlet",params:{action:"queryMenuUser",input:encodeURI(e),start:t}}).then(function(e){"Fail"==e.data.result?(a.yhxxList=[],a.totalSize=0):(a.yhxxList=e.data.ryList,a.totalSize=e.data.ryList[0].ZS),a.loading=!1}).catch(function(e){a.loading=!1})}},created:function(){},watch:{},mounted:function(){this.queryMenuUser(this.search_ryxm,1)}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"staff_mag"}},[a("div",{staticClass:"nav"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("员工管理")])],1),e._v(" "),a("div",{staticClass:"searchGroup"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:14}},[e._v("\n           \n          ")]),e._v(" "),a("el-col",{attrs:{span:7}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{placeholder:"请输入姓名或联系电话搜索"},model:{value:e.search_ryxm,callback:function(t){e.search_ryxm=t},expression:"search_ryxm"}})],1)]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple search-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.searchFun}},[e._v(" 搜索 ")])],1)])],1)],1)],1),e._v(" "),a("div",{staticClass:"table_container"},[a("div",{staticClass:"muti_container"},[a("div",{staticClass:"mutiBar"},[a("div",{staticClass:"function",on:{click:e.addStaff}},[a("i",{staticClass:"el-icon-plus"}),e._v("\n            新增人员\n          ")]),e._v(" "),a("div",{staticClass:"function",on:{click:e.editStaff}},[a("i",{staticClass:"el-icon-edit"}),e._v("\n            编辑人员\n          ")])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"singleTableRy",staticStyle:{width:"100%"},attrs:{data:e.yhxxList,height:"100%",border:"","highlight-current-row":""},on:{"row-click":e.handletableClick,"selection-change":e.handleSelectionChange,"current-change":e.handleTableCurrentChange}},[a("el-table-column",{attrs:{prop:"XM",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"PHONE",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"USER_TYPE_NAME",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"LRSJ",label:"录入时间",width:"155"}})],1),e._v(" "),a("div",{staticClass:"table_info_bar"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[100,200,300,400],"page-size":10,layout:"total, prev, pager, next, jumper",total:e.totalSize},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])],1)])]),e._v(" "),a("el-dialog",{attrs:{title:e.getTitleText5,visible:e.isShowEditStaff,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(t){e.isShowEditStaff=t}}},[a("div",{staticClass:"shortingTabs",staticStyle:{margin:"-30px -20px -10px"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.editActive,callback:function(t){e.editActive=t},expression:"editActive"}},[a("el-tab-pane",{attrs:{label:"菜单权限",name:"first"}},[a("div",{staticClass:"chooseMenu"},[a("div",{staticClass:"left"},[a("el-tree",{staticClass:"filter-tree",staticStyle:{height:"300px","overflow-y":"auto"},attrs:{data:e.data2,"show-checkbox":"","node-key":"MENU_UUID","default-checked-keys":e.menuCheckList,props:e.defaultPropsMenu,"default-expand-all":""},on:{check:e.handleNodeCheck}})],1)])])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isShowEditStaff=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveRyxx()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.dialogNameGetUser,visible:e.dialogTableGetUser,id:"ssckForm",width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogTableGetUser=t}}},[a("el-input",{staticClass:"input-with-select",staticStyle:{margin:"-12px 0px 20px"},attrs:{placeholder:"请输入联系电话进行查询",id:"xjryInput"},model:{value:e.searchUserValue,callback:function(t){e.searchUserValue=t},expression:"searchUserValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchUser},slot:"append"})],1),e._v(" "),a("el-table",{attrs:{data:e.gridDataCk,height:"400"},on:{"row-click":e.handletableUserClick}},[a("el-table-column",{attrs:{property:"XM",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{property:"PHONE",label:"手机号码"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"center",position:"relative",top:"10px"},attrs:{small:"",layout:"prev, pager, next",total:e.gridDataSize,"current-page":e.currentPage},on:{"current-change":e.gridCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)},staticRenderFns:[]},d=a("VU/8")(o,u,!1,function(e){a("NeW0")},"data-v-8a078366",null);t.default=d.exports},mClu:function(e,t,a){var i=a("kM2E");i(i.S+i.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});
//# sourceMappingURL=2.ed8e207183a8c976b04e.js.map