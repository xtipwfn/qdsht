webpackJsonp([3],{K31e:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("mvHQ"),i=s.n(r),n=s("mtWM"),o=s.n(n);s("162o"),s("zL8q");var a={getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},name:"",data:function(){return{formName:{user:"",userError:"",password:"",passwordError:"",beDisabled:!0},isSubmiting:!1,isShowUpdateTips:!1,isShowTypeSel:!1,identityList:[],UserMenuList:[],menu_uuid:""}},methods:{resetForm:function(){this.formName.user="",this.formName.userError="",this.formName.password="",this.formName.passwordError=""},timeToFormat:function(t){var e,s,r="00:00";return t>0&&((e=Math.floor(t/60))<10&&(e="0"+e),(s=Math.floor((t-60*e)%60))<10&&(s="0"+s),r=e+":"+s),r},submitForm:function(t){this.login()},login:function(){var t=this.formName.user,e=this.formName.password;this.isSubmiting=!this.isSubmiting;var s=this;o()({method:"POST",url:this.projectName+"login",params:{phone:t,password:e}}).then(function(t){if(s.isSubmiting=!s.isSubmiting,200==t.data.code){sessionStorage.setItem("tokenHead",t.data.data.tokenHead),sessionStorage.setItem("token",t.data.data.token);var e=i()(t.data.data.user);sessionStorage.setItem("userInfo",e),s.queryUserMenuList()}else s.$alert(t.data.message,"提示",{confirmButtonText:"确定"})}).catch(function(t){})},queryUserMenuList:function(){var t=this;o()({method:"POST",url:this.projectName+"menu/queryMenu",params:{},headers:{Authorization:sessionStorage.getItem("tokenHead")+sessionStorage.getItem("token")}}).then(function(e){200==e.data.code?(t.UserMenuList=e.data.data,t.$router.push(t.UserMenuList[0].children[0].href),sessionStorage.setItem("menu_uuid",e.data.UserMenuList[1].menuUuid)):t.$alert(e.data.message,"提示",{confirmButtonText:"确定"})}).catch(function(t){})},inputBlur:function(t,e){"user"===t?this.formName.userError=""===e?"*用户名不能为空":"":"password"===t&&(this.formName.passwordError=""===e?"*密码不能为空":""),""!=this.formName.user&&""!=this.formName.password?this.formName.beDisabled=!1:this.formName.beDisabled=!0}},created:function(){var t=this;document.onkeypress=function(e){if(13==(document.all?event.keyCode:e.which))return t.submitForm(),!1}},directives:{focus:{inserted:function(t){t.focus()}}},mounted:function(){var t=navigator.userAgent,e=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1;if(t.indexOf("Edge"),t.indexOf("Trident")>-1&&t.indexOf("rv:11.0"),e){new RegExp("MSIE (\\d+\\.\\d+);").test(t);var s=parseFloat(RegExp.$1);return 7==s?7:8==s?8:9==s?9:10==s?10:6}}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{attrs:{id:"login-container"}},[r("div",{staticClass:"topTips"},[t.isShowUpdateTips?r("p",{staticClass:"tipsToUpdate"},[t._v("您的浏览器版本过低或者使用了兼容模式，可能无法正常使用系统功能。请升级最新浏览器版本。或者点击下载我们推荐的谷歌浏览器 "),r("button",{attrs:{type:"button",name:"button"}},[t._v("下载谷歌浏览器")])]):t._e(),t._v(" "),r("p",{staticClass:"welcome"},[t._v("您好，欢迎来到xxx!")])]),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"banner"},[r("img",{staticClass:"bg",attrs:{src:s("ntHA"),alt:""}}),t._v(" "),r("div",{attrs:{id:"loginForm"}},[r("div",{staticClass:"topTitle"},[t._v("\n                    登陆\n                ")]),t._v(" "),r("div",{staticClass:"formBox"},[r("div",{staticClass:"inputBox"},[r("label",[t._v("用户名:")]),t._v(" "),r("el-input",{attrs:{placeholder:"请输入用户名",type:"text",id:"user"},on:{input:function(e){return t.inputBlur("user",t.formName.user)}},model:{value:t.formName.user,callback:function(e){t.$set(t.formName,"user",e)},expression:"formName.user"}})],1),t._v(" "),r("p",{staticClass:"errorTips"},[t._v(t._s(t.formName.userError))]),t._v(" "),r("div",{staticClass:"inputBox"},[r("label",[t._v("密    码:")]),t._v(" "),r("el-input",{attrs:{placeholder:"请输入密码",type:"password",id:"password"},on:{input:function(e){return t.inputBlur("password",t.formName.password)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("formName")}},model:{value:t.formName.password,callback:function(e){t.$set(t.formName,"password",e)},expression:"formName.password"}})],1),t._v(" "),r("p",{staticClass:"errorTips"},[t._v(t._s(t.formName.passwordError))]),t._v(" "),r("el-button",{attrs:{type:"primary",loading:t.isSubmiting,disabled:t.formName.beDisabled,id:"loginBtn"},on:{click:function(e){return t.submitForm("formName")}}},[t._v("提交")])],1)])]),t._v(" "),t._m(1)]),t._v(" "),t.isShowTypeSel?r("div",{staticClass:"manyIdentityMask"},[r("ul",[r("li",[t._v("请选择登陆身份")]),t._v(" "),t._l(t.identityList,function(e){return r("li",{key:e.CODE,on:{click:function(s){return t.chooseIdentity(e.CODE)}}},[t._v(t._s(e.MSG))])})],2)]):t._e(),t._v(" "),r("div",{staticStyle:{outline:"0"},attrs:{id:"loginDiv",tabindex:"1"}},[r("input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{opacity:"0",position:"absolute"},attrs:{type:"text"}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("img",{attrs:{src:s("Vpqn"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[e("p",{staticClass:"first"},[this._v("服务热线：020-3861 7652 邮箱地址:524783485@qq.com")]),this._v(" "),e("p",[this._v("Address:广东省广州市天河区元岗街道天源路天河新天地C座1004")])])}]},m=s("VU/8")(a,u,!1,function(t){s("UeoE")},null,null);e.default=m.exports},UeoE:function(t,e){},Vpqn:function(t,e,s){t.exports=s.p+"static/img/logo.64e7212.png"},ntHA:function(t,e,s){t.exports=s.p+"static/img/bannerbg.17ac114.png"}});
//# sourceMappingURL=3.27d037a02dfca2b5de6a.js.map